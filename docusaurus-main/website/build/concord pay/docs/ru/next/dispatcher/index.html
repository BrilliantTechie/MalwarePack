<!DOCTYPE html><html lang="ru"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Спецификация по взаимодействию торговца с ПО Dispatcher · </title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Оплата на платежной странице процессинга"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="ru"/><meta property="og:title" content="Спецификация по взаимодействию торговца с ПО Dispatcher · "/><meta property="og:type" content="website"/><meta property="og:url" content="AntoninaSych.github.io/docs/"/><meta property="og:description" content="## Оплата на платежной странице процессинга"/><meta property="og:image" content="AntoninaSych.github.io/docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="AntoninaSych.github.io/docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/docs/img/footer-concord-logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/website/static/js/main.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/prism.css"/><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/ru"><img class="logo" src="/docs/img/footer-concord-logo.png" alt=""/><h2 class="headerTitleWithLogo"></h2></a><a href="/docs/ru/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/docs/docs/ru/next/dispatcher" target="_self">Документи</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>Русский</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/docs/en/next/dispatcher">English</a></li><li><a href="/docs/docs/uk/next/dispatcher">Українська</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>ConcordPay</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">GooglePay<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/ru/next/GooglePay">GooglePay</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ConcordPay<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/docs/ru/next/dispatcher">Спецификация по взаимодействию торговца с ПО Dispatcher</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/ru/next/dictionary">Dictionary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">ApplePay<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/docs/ru/next/ApplePayWeb">ApplePayWeb</a></li><li class="navListItem"><a class="navItem" href="/docs/docs/ru/next/ApplePayApp">ApplePayApp</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Спецификация по взаимодействию торговца с ПО Dispatcher</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="оплата-на-платежной-странице-процессинга"></a><a href="#оплата-на-платежной-странице-процессинга" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Оплата на платежной странице процессинга</h2>
<p>Для оплаты на платежной странице процессинга необходимо выполнить редирект на страницу процессингово центра, с  POST данными.</p>
<p><strong>Production url:</strong>   <a href="https://pay.concord.ua/api/">https://pay.concord.ua/api/</a></p>
<p>POST параметры:</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th><th>Значение</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>Тип операции</td><td>Purchase</td></tr>
<tr><td>merchant_id</td><td>ID мерчанта, выдается поцесcингом</td><td></td></tr>
<tr><td>amount</td><td>Сумма операции. Пример 500.00</td><td></td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,currency_iso,description разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
<tr><td>order_id</td><td>Уникальный номер операции на стороне торговца. Если операция дублируется - торговец получает ошибку.</td><td></td></tr>
<tr><td>currency_iso</td><td>Валюта платежа.</td><td>UAH</td></tr>
<tr><td>description</td><td>Назначение платежа. Выводится на платежной странице, при вводе платежных реквизитов. Отображается в выписке по счету и реестрах</td><td></td></tr>
<tr><td>add_params</td><td>Массив с дополнительными параметрами. Дополнительные параметры потом возвращаются мерчанту в callback вызове</td><td></td></tr>
<tr><td>approve_url</td><td>URL для переадресации в случае, если платеж успешен</td><td></td></tr>
<tr><td>decline_url</td><td>URL для переадресации в случае, если платеж не успешен</td><td></td></tr>
<tr><td>cancel_url</td><td>URL для переадресации в случае, если пользователь отказался совершить оплату</td><td></td></tr>
<tr><td>callback_url</td><td>URL на который прийдет информация о результате выполнения платежа</td><td></td></tr>
<tr><td>redirect</td><td>true/false - по умолчанию true, если параметр стоит true, тогда клиент не будет получать переадресацию, а получит url платежной страницы</td><td>Не обязательный</td></tr>
<tr><td>auth_type</td><td>По умолчанию 1 - покупка, 2-Предавторизация</td><td>Не обязательный</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="callback-вызов-для-отправки-уведомления-о-статусе-платежа"></a><a href="#callback-вызов-для-отправки-уведомления-о-статусе-платежа" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Callback вызов для отправки уведомления о статусе платежа</h2>
<p>Данные отправляются по URL адресу который указан в параметрах платежа в поле</p>
<p>callback_url.</p>
<p>Данные отправляются на сервер торговца в формате JSON</p>
<p>Параметры:</p>
<table>
<thead>
<tr><th>Название параметра</th><th>Описание</th><th>Значения</th></tr>
</thead>
<tbody>
<tr><td>merchantAccount</td><td>ID мерчанта</td><td></td></tr>
<tr><td>orderReference</td><td>ID операции в системе торговца</td><td></td></tr>
<tr><td>amount</td><td>Сумма операции</td><td></td></tr>
<tr><td>currency</td><td>Валюта операции</td><td></td></tr>
<tr><td>phone</td><td>Номер телефона клиента(Если включен ввод телефона на платежной странице)</td><td></td></tr>
<tr><td>createdDate</td><td>Дата платежа в формате YYYY-MM-DD HH:II:SS</td><td></td></tr>
<tr><td></td><td>Пример: 2018-12-14 12:01:26</td><td></td></tr>
<tr><td>cardPan</td><td>Маскированный PAN карты.</td><td></td></tr>
<tr><td></td><td>Пример: 535277******0298</td><td></td></tr>
<tr><td>cardType</td><td>Тип карты</td><td>Visa</td></tr>
<tr><td></td><td></td><td>MasterCard</td></tr>
<tr><td>fee</td><td>Комиссия за операцию</td><td></td></tr>
<tr><td>transactionId</td><td>ID транзакции на стороне ПЦ</td><td></td></tr>
<tr><td>type</td><td>Тип операции. На данный момент параметр не используется</td><td></td></tr>
<tr><td>recToken</td><td>Токен для рекурентного платежа</td><td></td></tr>
<tr><td>transactionStatus</td><td>Статус операции</td><td>Approved - Успешно</td></tr>
<tr><td></td><td></td><td>Declined - Отказ</td></tr>
<tr><td>reason</td><td>Текстовая причина отказа</td><td></td></tr>
<tr><td>reasonCode</td><td>Код ошибки при отказе</td><td></td></tr>
<tr><td>merchantSignature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,orderReference,amount,currency разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td><strong>Порядок параметров при конкатенации важен!</strong></td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="рекуррентные-платежи-recpaymentоплата-по-токену"></a><a href="#рекуррентные-платежи-recpaymentоплата-по-токену" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Рекуррентные платежи RecPayment(оплата по токену)</h2>
<p><strong>Production url:</strong>   <a href="https://pay.concord.ua/api/">https://pay.concord.ua/api/</a></p>
<p>Для совершения рекуррентного платежа необходимо отправить POST запрос со следующими параметрами:</p>
<table>
<thead>
<tr><th>Название</th><th>Описание</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>Необходимое значение для данной операции RecPayment</td></tr>
<tr><td>merchant_id</td><td>Идентификатор мерчанта</td></tr>
<tr><td>amount</td><td>Сумма операции. Пример 500.00</td></tr>
<tr><td>recurring_token</td><td>Токен полученный от ПС</td></tr>
<tr><td>order_id</td><td>Уникальный номер заказа в системе торговца</td></tr>
<tr><td>description</td><td>Назначение платежа</td></tr>
<tr><td>currency_iso</td><td>Валюта. На данный момент только UAH</td></tr>
<tr><td>auth_type</td><td>1 - покупка, 2 - предавторизация. Не обязательный. По умолчанию - 1</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,recurring_token,currency_iso,description разделенных “;” (точка с запятой) в кодировке UTF-8.</td></tr>
<tr><td></td><td><strong>Порядок параметров при конкатенации важен!</strong></td></tr>
</tbody>
</table>
<p>В ответ приходят следующие параметры:</p>
<table>
<thead>
<tr><th>Название</th><th>Параметры</th></tr>
</thead>
<tbody>
<tr><td>status</td><td>APPROVED - успешно,</td></tr>
<tr><td></td><td>DECLINED - операция не успешна</td></tr>
<tr><td>code</td><td>Код ответа</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-verify"></a><a href="#операция-verify" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция Verify</h2>
<p>Для пополнения карты необходимо отправить переадресовать пользователя на страницу платежного шлюза  методом POST со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>тип операции “Verify”</td><td>String</td></tr>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции. Генерируется на стороне мерчанта. Он должен быть уникальным на протяжении всей работы.</td><td>Integer</td></tr>
<tr><td>approve_url</td><td>URL на который будет перенаправлен пользователь в случае успешной операции</td><td>String</td></tr>
<tr><td>decline_url</td><td>URL на который будет перенаправлен пользователь в случае не успешной операции</td><td>String</td></tr>
<tr><td>cancel_url</td><td>URL на который будет перенаправлен пользователь в случае отмены операции</td><td>String</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,approve_url,decline_url,cancel_url разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td><strong>Порядок параметров при конкатенации важен!</strong></td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-reversal"></a><a href="#операция-reversal" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция Reversal</h2>
<p>Для проверки статуса платежа или верификации карты необходимо отправить POST запрос на url <a href="https://pay.concord.ua/api/reversal">https://pay.concord.ua/api/reversal</a> со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции которая была отправлена в запросе P2PCredit,P2PDebit или Verify</td><td>Integer</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров $merchant_id,$order_id разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ возвращается JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>code</td><td>Код ответа. (Список кодов ответа см. ниже)</td><td>Integer</td></tr>
<tr><td>message</td><td>Текстовое сообщение с результатом запроса</td><td>String</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-complete"></a><a href="#операция-complete" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция Complete</h2>
<p>Для проверки статуса платежа или верификации карты необходимо отправить POST запрос на url <a href="https://pay.concord.ua/api">https://pay.concord.ua/api</a> со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>operation</td><td>Complete</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции которая была отправлена в запросе Purchase</td><td>Integer</td></tr>
<tr><td>amount</td><td>Сумма списания</td><td>float</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров $merchant_id,$order_id ,$amount разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ возвращается JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>code</td><td>Код ответа. (Список кодов ответа см. ниже)</td><td>Integer</td></tr>
<tr><td>message</td><td>Текстовое сообщение с результатом запроса</td><td>String</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-check"></a><a href="#операция-check" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция Check</h2>
<p>Для проверки статуса платежа или верификации карты необходимо отправить POST запрос на  url <a href="https://pay.concord.ua/api/check">https://pay.concord.ua/api/check</a> со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции которая была отправлена в запросе P2PCredit,P2PDebit или Verify</td><td>Integer</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров $merchant_id,$order_id разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ возвращается JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>reasoneCode</td><td>Код ответа. (Список кодов ответа см. ниже)</td><td>Integer</td></tr>
<tr><td>reason</td><td>Описание ответа</td><td>String</td></tr>
<tr><td>merchantAccount</td><td>мерчант</td><td>String</td></tr>
<tr><td>amount</td><td>Сумма</td><td>String</td></tr>
<tr><td>phone</td><td>Номер телефона</td><td>String</td></tr>
<tr><td>createdDate</td><td>дата платежа</td><td>String</td></tr>
<tr><td>cardPan</td><td>Маскированный номер карты</td><td>String</td></tr>
<tr><td>cardType</td><td>Тип карты</td><td>String</td></tr>
<tr><td>transactionId</td><td>Идентификатор транзакции</td><td>BigInteger</td></tr>
<tr><td>message</td><td>Текстовое сообщение с результатом запроса</td><td>String</td></tr>
<tr><td>datetime</td><td>Дата создания операции на сервере</td><td>String</td></tr>
<tr><td>fee</td><td>Комиссия платежа</td><td>Double</td></tr>
<tr><td>transactionStatus</td><td>Статус операции(Справочник см ниже)</td><td>String</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-p2pcredit"></a><a href="#операция-p2pcredit" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция P2PCredit</h2>
<p>Для пополнения карты необходимо отправить POST запрос со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>тип операции “P2PCredit”</td><td>String</td></tr>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции. Генерируется на стороне мерчанта. Он должен быть уникальным на протяжении всей работы.</td><td>String</td></tr>
<tr><td>amount</td><td>Сумма операции, должна быть дробным числом, c двумя знаками после запятой. Пример: 100.50</td><td>Double</td></tr>
<tr><td>card_number</td><td>Номер карты получателя.</td><td>String</td></tr>
<tr><td>token</td><td>Токен, можно использовать вместо карты получателя</td><td>String</td></tr>
<tr><td>currency_iso</td><td>Валюта операции. На данный момент доступна только “UAH”</td><td>String</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров $merchant_id,$order_id,$amount,card_number,currency_iso разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ возвращается JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>code</td><td>Код ответа. (Список кодов ответа см. ниже Коды ответа P2PCredit)</td><td>Integer</td></tr>
<tr><td>message</td><td>Текстовое сообщение с результатом запроса</td><td>String</td></tr>
<tr><td>status</td><td>Статусы операции</td><td>String</td></tr>
<tr><td></td><td>APPROVED - перевод успешен</td><td></td></tr>
<tr><td></td><td>DECLINED - Перевод не успешен</td><td></td></tr>
<tr><td></td><td>ON-PAYMENT - Заявка на перевод в обработке, необходимо дополнительно запросить статус</td><td></td></tr>
<tr><td>transactionID</td><td>Идентификатор транзакции в платежной системе</td><td>Integer</td></tr>
<tr><td>approvalCode</td><td>Код авторизации</td><td>Integer</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-получения-баланса-getbalance"></a><a href="#операция-получения-баланса-getbalance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция получения баланса (GetBalance)</h2>
<p>Для пополнения карты необходимо отправить POST на url  <a href="https://pay.concord.ua/api/balance">https://pay.concord.ua/api/balance</a> запрос со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>тип операции “GetBalance”</td><td>String</td></tr>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>date</td><td>Дата и время запроса в произвольном формате</td><td>String</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров $merchant_id,$data  разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ возвращается JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>mk_deposit</td><td>Лимит Mastercard</td><td>Float</td></tr>
<tr><td>visa_deposit</td><td>Лимит Visa</td><td>Float</td></tr>
<tr><td>mk_available</td><td>Доступный остаток Mastercard</td><td>Float</td></tr>
<tr><td>visa_available</td><td>Доступный остаток Visa</td><td>Float</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-p2pdebit"></a><a href="#операция-p2pdebit" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция P2PDebit</h2>
<p>Для списания средств с карты необходимо переадресовать пользователя на страницу платежного шлюза  методом POST со следующими параметрами:</p>
<table>
<thead>
<tr><th>Имя параметра</th><th>Описание</th><th>Тип</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>тип операции “P2PDebit”</td><td>String</td></tr>
<tr><td>merchant_id</td><td>идентификатор мерчанта</td><td>String</td></tr>
<tr><td>order_id</td><td>Это уникальный номер операции. Генерируется на стороне мерчанта. Он должен быть уникальным на протяжении всей работы.</td><td>Integer</td></tr>
<tr><td>amount</td><td>Сумма операции, должна быть дробным числом, c двумя знаками после запятой. Пример: 100.50</td><td>Double</td></tr>
<tr><td>currency_iso</td><td>Валюта операции. На данный момент доступна только “UAH”</td><td>String</td></tr>
<tr><td>description</td><td>Назначение платежа</td><td>String</td></tr>
<tr><td>approve_url</td><td>URL на который будет перенаправлен пользователь в случае успешной операции</td><td>String</td></tr>
<tr><td>decline_url</td><td>URL на который будет перенаправлен пользователь в случае не успешной операции</td><td>String</td></tr>
<tr><td>cancel_url</td><td>URL на который будет перенаправлен пользователь в случае отмены операции</td><td>String</td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td>String</td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,currency_iso,description,approve_url,decline_url,cancel_url разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="операция-purchaseonmerchant"></a><a href="#операция-purchaseonmerchant" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Операция PurchaseOnMerchant</h2>
<p>Для оплаты на платежной странице мерчанта необходимо отправить  POST запрос со следующими данными данными.</p>
<p><strong>Production url:</strong>   <a href="https://pay.concord.ua/api/">https://pay.concord.ua/api/</a></p>
<p>POST параметры:</p>
<table>
<thead>
<tr><th></th><th></th><th></th></tr>
</thead>
<tbody>
<tr><td>Параметр</td><td>Описание</td><td>Значение</td></tr>
<tr><td>operation</td><td>Тип операции</td><td>PurchaseOnMerchant</td></tr>
<tr><td>merchant_id</td><td>ID мерчанта, выдается поцесcингом</td><td></td></tr>
<tr><td>amount</td><td>Сумма операции. Пример 500.00</td><td></td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,currency_iso,description разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
<tr><td>order_id</td><td>Уникальный номер операции на стороне торговца. Если операция дублируется - торговец получает ошибку.</td><td></td></tr>
<tr><td>currency_iso</td><td>Валюта платежа.</td><td>UAH</td></tr>
<tr><td>description</td><td>Назначение платежа. Выводится на платежной странице, при вводе платежных реквизитов. Отображается в выписке по счету и реестрах</td><td></td></tr>
<tr><td>add_params</td><td>Массив с дополнительными параметрами. Дополнительные параметры потом возвращаются мерчанту в callback вызове</td><td></td></tr>
<tr><td>token</td><td>Токен для списания с карты без передачи реквизитов карты</td><td></td></tr>
<tr><td>card_num</td><td>Номер карты</td><td></td></tr>
<tr><td>card_exp_month</td><td>Срок действия карты MM</td><td></td></tr>
<tr><td>card_exp_year</td><td>Срок действия карты  YY</td><td></td></tr>
<tr><td>card_cvv</td><td>CVV2 код, в случае операции без CVV необходимо указать -1</td><td></td></tr>
<tr><td>card_holder</td><td>Владелец карты.  Не обязательное поле</td><td></td></tr>
<tr><td>phone</td><td>Номер телефона клиента. Не обязательное поле</td><td></td></tr>
<tr><td>payment_type</td><td>Тип платежа.</td><td></td></tr>
<tr><td></td><td>Purchase - покупка</td><td></td></tr>
<tr><td></td><td>PreAuth - блокирование средств на карте</td><td></td></tr>
<tr><td>secure_type</td><td>Тип прохождения безопасности транзакции</td><td></td></tr>
<tr><td></td><td>Может принимать следующие значения:</td><td></td></tr>
<tr><td></td><td>Auto</td><td></td></tr>
<tr><td></td><td>3DS</td><td></td></tr>
<tr><td></td><td>Non3DS</td><td></td></tr>
<tr><td>callback_url</td><td>URL на который прийдет информация о результате выполнения платежа</td><td></td></tr>
</tbody>
</table>
<p>Ответ:</p>
<table>
<thead>
<tr><th></th><th></th><th></th></tr>
</thead>
<tbody>
<tr><td>Параметр</td><td>Описание</td><td>Значение</td></tr>
<tr><td>status</td><td>Статус платежа</td><td>справочник “Статусы платежа”</td></tr>
<tr><td>code</td><td>Код ответа</td><td>Справочник “Коды ответов”</td></tr>
<tr><td>order_id</td><td>Уникальный номер заказа в системе торговца</td><td></td></tr>
<tr><td>amount</td><td>Сумма платежа</td><td></td></tr>
<tr><td>fee</td><td>Комиссия</td><td></td></tr>
<tr><td>currency</td><td>Валюта платежа</td><td></td></tr>
<tr><td>token</td><td>Токен для последующих оплат. Токен вернется в случае, если платеж успешен</td><td></td></tr>
<tr><td>d3_acs_url</td><td>URL acs сервера на который необходимо отправить пользователя для верификации</td><td></td></tr>
<tr><td>d3_md</td><td>Уникальный идентификатор который необходимо передать на ACS сервер</td><td></td></tr>
<tr><td>d3_pareq</td><td>Запрос который необходимо передать на ACS сервер</td><td></td></tr>
<tr><td>transaction_key</td><td>Ключ транзакции, который необходимо использовать для подтверждения платежа</td><td></td></tr>
<tr><td>transaction_id</td><td>Идентификатор транзакции</td><td></td></tr>
<tr><td>signature</td><td></td><td></td></tr>
</tbody>
</table>
<p>Если в ответе code пришло значение 2001 необходимо провести проверку 3DS.</p>
<p>Для проверки 3ds необходимо методом POST отправить форму с параметрами d3_md, d3_pareq, term_url  на d3_acs_url.</p>
<p>term_url - url на который вернется результат проверки 3DS.</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"MPIform"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">'${d3_acs_url}'</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PaReq"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'${d3_pareq }'</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"MD"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'${d3_md }'</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"TermUrl"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">'${term_url}'</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="получение-токена-для-masterpass"></a><a href="#получение-токена-для-masterpass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Получение токена для Masterpass</h2>
<p><strong>Production url:</strong>  <a href="https://pay.concord.ua/api/mptoken">https://pay.concord.ua/api/mptoken</a></p>
<p>Для получения гостевого токена необходимо отправить  POST запрос со следующими данными данными.</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th></tr>
</thead>
<tbody>
<tr><td>msisdn</td><td>Номер телефона для входа в кошелек Masterpass в формате 380XXXXXXXXX</td></tr>
<tr><td>client_id</td><td>Идентификатор клиента в системе MasterPass</td></tr>
</tbody>
</table>
<p>В ответ приходит объект в формате JSON со следующими параметрами:</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th></tr>
</thead>
<tbody>
<tr><td>res</td><td>Результат запроса 0 - все ок</td></tr>
<tr><td>msg</td><td>Сообщение об ошибке</td></tr>
<tr><td>token</td><td>Токен для передачи в mfs библиотеку</td></tr>
<tr><td>reference_no</td><td>Уникальный номер запроса</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="проведение-платежа-через-masterpass"></a><a href="#проведение-платежа-через-masterpass" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Проведение платежа через Masterpass</h2>
<p><strong>Production url:</strong>  <a href="https://pay.concord.ua/api">https://pay.concord.ua/api</a></p>
<p>Для получения гостевого токена необходимо отправить  POST запрос со следующими данными данными.</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th><th>Значение</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>Тип операции</td><td>PurchaseMasterpass</td></tr>
<tr><td>merchant_id</td><td>Идентификатор мерчанта</td><td></td></tr>
<tr><td>amount</td><td>Сумма платежа в формате 1.00</td><td></td></tr>
<tr><td>order_id</td><td></td><td></td></tr>
<tr><td>currency_iso</td><td>Валюта</td><td>UAH</td></tr>
<tr><td>description</td><td>Описание плаатежа</td><td></td></tr>
<tr><td>approve_url</td><td>URL для переадресации после успешного платежа (в случае подтверждения 3DS на странице ConcordPay)</td><td></td></tr>
<tr><td>decline_url</td><td>URL для переадресации после не успешного платежа (в случае подтверждения 3DS на странице ConcordPay)</td><td></td></tr>
<tr><td>cancel_url</td><td>URL для переадресации после отмены платежа (в случае подтверждения 3DS на странице ConcordPay)</td><td></td></tr>
<tr><td>callback_url</td><td>URL на который будет отправлен callback о статусе платежа</td><td></td></tr>
<tr><td>add_params[wallet]</td><td>Признак кошелька</td><td>masterpass</td></tr>
<tr><td>add_params[msisdn]</td><td>Номер телефона для входаа в кошелек Masterpass в формате 380XXXXXXXXX</td><td></td></tr>
<tr><td>add_params[token]</td><td>Токен полученный с сервера  MasterPass</td><td></td></tr>
<tr><td>add_params[card_name]</td><td>Alias карты полученный с сервера MasterPass</td><td></td></tr>
<tr><td>add_params[client_id]</td><td>Идентификатор мерчанта в системе MasterPass</td><td></td></tr>
<tr><td>add_params[ret_ref_no]</td><td>Уникальный номер транзакции полученный с сервера MasterPass</td><td></td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,currency_iso,description разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>В ответ приходит объект в формате JSON со следующими параметрами:</p>
<p>Если транзакция требует подтверждения 3DS:</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th></tr>
</thead>
<tbody>
<tr><td>code</td><td>Код ответа</td></tr>
<tr><td>status</td><td>Статус транзакции, если необходима проверка 3DS , в статусе , будет значение 3ds</td></tr>
<tr><td>d3AcsUrl</td><td>url для перенаправления клиента, для проверки 3ds</td></tr>
<tr><td>d3Md</td><td>Криптограмма для передачи на хост 3DS</td></tr>
<tr><td>d3Pareq</td><td>Запрос для передачи на хост 3DS</td></tr>
<tr><td>transaction_key</td><td>Ключ транзакции для подтверждения 3DS</td></tr>
<tr><td>TermUrl</td><td>Url для переадресации после вводе кода подтверждения на странице 3DS. По умолчанию url на страницу ConcordPay,  для проверки 3DS можно указать свой URL, тогда после прохождения 3DS необходимо вызвать метод “Подтверждение 3DS верификации”</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="подтверждение-3ds-верификации"></a><a href="#подтверждение-3ds-верификации" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Подтверждение 3DS верификации</h2>
<p>Для оплаты на платежной странице мерчанта необходимо отправить  POST запрос со следующими данными данными.</p>
<p><strong>Production url:</strong>   <a href="https://pay.concord.ua/api/">https://pay.concord.ua/api/</a></p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th><th>Значение</th></tr>
</thead>
<tbody>
<tr><td>operation</td><td>Тип операции</td><td>Complete3DS</td></tr>
<tr><td>transaction_key</td><td>Ключ транзакции</td><td></td></tr>
<tr><td>merchant_id</td><td>Идентификатор мерчанта</td><td></td></tr>
<tr><td>d3ds_md</td><td>Идентификатор полученный после редиректа с сервера ACS</td><td></td></tr>
<tr><td>d3ds_pares</td><td>Сообщение полученное после редиректа с сервера ACS</td><td></td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,transaction_key,d3ds_md,d3ds_pares разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
</tbody>
</table>
<p>Ответ</p>
<table>
<thead>
<tr><th>Параметр</th><th>Описание</th><th>Значение</th></tr>
</thead>
<tbody>
<tr><td>status</td><td>Статус платежа</td><td>справочник “Статусы платежа”</td></tr>
<tr><td>code</td><td>Код ответа</td><td>Справочник “Коды ответов”</td></tr>
<tr><td>order_id</td><td>Уникальный номер заказа в системе торговца</td><td></td></tr>
<tr><td>amount</td><td>Сумма платежа</td><td></td></tr>
<tr><td>fee</td><td>Комиссия</td><td></td></tr>
<tr><td>currency</td><td>Валюта платежа</td><td></td></tr>
<tr><td>card_pan</td><td>Маскированный номер карты</td><td></td></tr>
<tr><td>transaction_id</td><td>Идентификатор транзакции</td><td></td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="оплата-на-платежной-странице-процессинга-с-расщеплением-платежа"></a><a href="#оплата-на-платежной-странице-процессинга-с-расщеплением-платежа" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Оплата на платежной странице процессинга с расщеплением платежа</h2>
<p>Для оплаты на платежной странице процессинга необходимо выполнить редирект на страницу процессингово центра, с  POST данными.</p>
<p><strong>Production url:</strong>   <a href="https://pay.concord.ua/api/">https://pay.concord.ua/api/</a></p>
<p>POST параметры:</p>
<table>
<thead>
<tr><th></th><th></th><th></th></tr>
</thead>
<tbody>
<tr><td>Параметр</td><td>Описание</td><td>Значение</td></tr>
<tr><td>operation</td><td>Тип операции</td><td>Purchase</td></tr>
<tr><td>merchant_id</td><td>ID мерчанта, выдается поцесcингом</td><td></td></tr>
<tr><td>amount</td><td>Сумма операции. Пример 500.00</td><td></td></tr>
<tr><td>signature</td><td>В целях подтверждения валидности данных должна быть сгенерирована и передана в запросе HMAC_MD5 контрольная подпись с использованием SecretKey торговца.</td><td></td></tr>
<tr><td></td><td>Строка, подлежащая HMAC_MD5, генерируется путем конкатенации параметров merchant_id,order_id,amount,currency_iso,description разделенных “;” (точка с запятой) в кодировке UTF-8.</td><td></td></tr>
<tr><td></td><td>Порядок параметров при конкатенации важен!</td><td></td></tr>
<tr><td>order_id</td><td>Уникальный номер операции на стороне торговца. Если операция дублируется - торговец получает ошибку.</td><td></td></tr>
<tr><td>currency_iso</td><td>Валюта платежа.</td><td>UAH</td></tr>
<tr><td>description</td><td>Назначение платежа. Выводится на платежной странице, при вводе платежных реквизитов. Отображается в выписке по счету и реестрах</td><td></td></tr>
<tr><td>add_params</td><td>Массив с дополнительными параметрами. Дополнительные параметры потом возвращаются мерчанту в callback вызове</td><td></td></tr>
<tr><td>split</td><td>Признак расщепления платежа</td><td>0 - не расщеплять</td></tr>
<tr><td></td><td></td><td>1 -  расщеплять</td></tr>
<tr><td>split_rules</td><td>Массив с правилами расщепления который содержит в себе идентификаторы субмерчанта и суммы.</td><td></td></tr>
<tr><td></td><td>Сумма расщеплений должна совпадать с суммой платежа.</td><td></td></tr>
<tr><td></td><td>Пример:</td><td></td></tr>
<tr><td></td><td>split_rules[0][sub_merchant_id]=test1&amp;split_rules[0][amount]=100.00&amp;split_rules[1][sub_merchant_id]=test2&amp;split_rules[1][amount]=50.00&amp;.......&amp;split_rules[n][sub_merchant_id]=testn&amp;split_rules[n][amount]=10.00</td><td></td></tr>
<tr><td>approve_url</td><td>URL для переадресации в случае, если платеж успешен</td><td></td></tr>
<tr><td>decline_url</td><td>URL для переадресации в случае, если платеж не успешен</td><td></td></tr>
<tr><td>cancel_url</td><td>URL для переадресации в случае, если пользователь отказался совершить оплату</td><td></td></tr>
<tr><td>callback_url</td><td>URL на который прийдет информация о результате выполнения платежа</td><td></td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/docs/ru/next/GooglePay"><span class="arrow-prev">← </span><span>Назад</span></a><a class="docs-next button" href="/docs/docs/ru/next/dictionary"><span>Вперед</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#оплата-на-платежной-странице-процессинга">Оплата на платежной странице процессинга</a></li><li><a href="#callback-вызов-для-отправки-уведомления-о-статусе-платежа">Callback вызов для отправки уведомления о статусе платежа</a></li><li><a href="#рекуррентные-платежи-recpaymentоплата-по-токену">Рекуррентные платежи RecPayment(оплата по токену)</a></li><li><a href="#операция-verify">Операция Verify</a></li><li><a href="#операция-reversal">Операция Reversal</a></li><li><a href="#операция-complete">Операция Complete</a></li><li><a href="#операция-check">Операция Check</a></li><li><a href="#операция-p2pcredit">Операция P2PCredit</a></li><li><a href="#операция-получения-баланса-getbalance">Операция получения баланса (GetBalance)</a></li><li><a href="#операция-p2pdebit">Операция P2PDebit</a></li><li><a href="#операция-purchaseonmerchant">Операция PurchaseOnMerchant</a></li><li><a href="#получение-токена-для-masterpass">Получение токена для Masterpass</a></li><li><a href="#проведение-платежа-через-masterpass">Проведение платежа через Masterpass</a></li><li><a href="#подтверждение-3ds-верификации">Подтверждение 3DS верификации</a></li><li><a href="#оплата-на-платежной-странице-процессинга-с-расщеплением-платежа">Оплата на платежной странице процессинга с расщеплением платежа</a></li></ul></nav></div><footer class="nav-footer" id="footer"><a href="https://concord.ua/" target="_blank" rel="noreferrer noopener" class="fbOpenSource" style="display:flex;justify-content:center"><img src="/docs/img/footer-concord-logo.png" alt="Concord" width="65" height="45"/></a><section class="copyright" style="display:flex;justify-content:center">Copyright © 2022   Concord</section></footer></div></body></html>
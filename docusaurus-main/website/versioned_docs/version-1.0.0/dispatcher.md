---
id: version-1.0.0-dispatcher
title: Specification for the interaction of the merchant with the Dispatcher software.
original_id: dispatcher
---

## Payment on the payment processing page

To pay on the payment processing page, you need to redirect to the page of the processing center, with POST data.

**Production url:**   https://pay.concord.ua/api/

POST params:
 
| Parameter     | Description                                                                                                                                                                          | Value        |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
| operation    | Type of transaction                                                                                                                                                                      | Purchase        |
| merchant_id  | ID merchant, issued by processing                                                                                                                                              |                 |
| amount       | The amount of the transaction. Example 500.00                                                                                                                                                     |                 |
| signature    | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                         |                 |
|              | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, currency_iso, description separated by “;” (semicolon) in UTF-8 encoding. |                 |
|              | The order of parameters during concatenation is important!                                                                                                                                        |                 |
| order_id     | Unique transaction number on the merchant side. If the operation is duplicated, the merchant receives an error.                                                                              |                 |
| currency_iso | Currency of payment.                                                                                                                                                                   | UAH             |
| description  | Purpose of payment. It is displayed on the payment page when entering payment details. Displayed in the account statement and registries                                                   |                 |
| add_params   | An array with additional parameters. Additional parameters are then returned to the merchant in a callback call                                                                      |                 |
| approve_url  | Redirect URL in case payment is successful                                                                                                                               |                 |
| decline_url  | Redirect URL in case payment is unsuccessful                                                                                                                            |                 |
| cancel_url   | Redirect URL in case the user refuses to make a payment                                                                                                      |                 |
| callback_url | URL to which information about the result of the payment will come                                                                                                                 |                 |
| redirect     | true / false - defaults to true, if the parameter is true, then the client will not receive redirects, but will receive the url of the payment page                                          | Optional |
| auth_type    | Default 1 - purchase, 2-Pre-authorization                                                                                                                                       | Optional |
| language     | Default ua - ukrainian, ru - russian, en - english   | Optional |
| client_first_name    | Client's first name  | Optional |
| client_last_name | Client's last name  | Optional |
| client_id | Client's ID in merchant system  | Optional |
| phone | Client's phone  | Optional |
| email | Client's email address  | Optional |

## Callback call to send notification of payment status


Data is sent to the URL specified in the payment parameters in the field callback_url.


Data is sent to the merchant's server in JSON format


Parameters:


| Parameter | Description                                                                                                                                                                | Values           |
|--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| merchantAccount    | Merchant ID                                                                                                                                                             |                    |
| orderReference     | Merchant system transaction ID                                                                                                                                         |                    |
| amount             | Transaction amount                                                                                                                                                          |                    |
| currency           | Transaction currency                                                                                                                                                         |                    |
| phone              | Customer phone number (If phone input on the payment page is enabled)                                                                                                |                    |
| createdDate        | Payment Date in Format YYYY-MM-DD HH:II:SS                                                                                                                              |                    |
|                    | Example: 2018-12-14 12:01:26                                                                                                                                             |                    |
| cardPan            | Masked PAN Card.                                                                                                                                                |                    |
|                    | Example: 535277******0298                                                                                                                                                |                    |
| cardType           | Card type                                                                                                                                                             | Visa               |
|                    |                                                                                                                                                                         | MasterCard         |
| fee                | Transaction fee                                                                                                                                                  |                    |
| transactionId      | Transaction ID on the PC side                                                                                                                                             |                    |
| type               | Type of transaction. The parameter is not currently used.                                                                                                                 |                    |
| recToken           | Token for recurring payment                                                                                                                                          |                    |
| transactionStatus  | Transaction Status                                                                                                                                                         | Approved - Successfully |
|                    |                                                                                                                                                                         | Declined - Renouncement   |
| reason             | Text reason for rejection                                                                                                                                                |                    |
| reasonCode         | Failure Error Code                                                                                                                                                  |                    |
| merchantSignature  | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                |                    |
|                    | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, orderReference, amount, currency separated by “;” (semicolon) in UTF-8 encoding. |                    |
|                    | **The order of parameters during concatenation is important!**                                                                                                                              |                    |


## Recurrent payments RecPayment (payment by token)

**Production url:**   https://pay.concord.ua/api/

To make a recurring payment send a POST request with the following parameters:

| Parameter        | Description                                                                                                                                                                                          |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| operation       | Required value for this operation RecPayment                                                                                                                                             |
| merchant_id     | Merchant ID                                                                                                                                                                            |
| amount          | The amount of the transaction. Example 500.00                                                                                                                                                                    |
| recurring_token | Token received from PC                                                                                                                                                                           |
| order_id        | Unique order number in the merchant system                                                                                                                                                        |
| description     | Purpose of payment                                                                                                                                                                                |
| currency_iso    | Currency. Currently only UAH                                                                                                                                                               |
| auth_type       | 1 - purchase, 2 - pre-authorization. Not required. The default is 1.                                                                                                                               |
| signature       | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                                          |
|                 | The string subject to HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, recurring_token, currency_iso, description separated by “;” (semicolon) in UTF-8 encoding. |
|                 | **The order of parameters during concatenation is important!**                                                                                                                                                        |

The following parameters come in response:

| Name | Parameters                      |
|----------|--------------------------------|
| status   | APPROVED - successfully,            |
|          | DECLINED - operation failed |
| code     | Response code                     |

## Verify Operation

To verify the card send the user redirect to the payment gateway page using the POST method with the following parameters:

| Parameter | Description                                                                                                                                                                                    | Тип     |
|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| operation     | operation type “Verify”                                                                                                                                                                    | String  |
| merchant_id   | merchant identifier                                                                                                                                                                      | String  |
| order_id      | This is a unique transaction number. It is generated on the side of the merchant. It must be unique throughout the work.                                                                       | Integer |
| approve_url   | URL to which the user will be redirected in case of a successful operation                                                                                                                  | String  |
| decline_url   | URL to which the user will be redirected in case of unsuccessful operation                                                                                                              | String  |
| cancel_url    | URL to which the user will be redirected if the operation is canceled                                                                                                                    | String  |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                                    | String  |
|               | The string subject to HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, approve_url, decline_url, cancel_url separated by “;” (semicolon) in UTF-8 encoding. |         |
|               |  **The order of parameters during concatenation is important!**                                                                                                                                                        |         |

## Operation Reverse

To reverce payment send a POST request to url https://pay.concord.ua/api/reverse with the following parameters:

| Parameter | Description                                                                                                                                                 | Тип     |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| merchant_id   | merchant identifier                                                                                                                                  | String  |
| order_id      | This is a unique transaction number that was sent in a P2PCredit, P2PDebit or Verify request.                                                           | Integer |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant. | String  |
|               | The string to be HMAC_MD5 is generated by concatenating the parameters $ merchant_id, $ order_id separated by “;” (semicolon) in UTF-8 encoding.      |         |
|               | The order of parameters during concatenation is important!                                                                                                               |         |

JSON is returned in response with the following parameters:

| Parameter | Description                                    | c     |
|---------------|--------------------------------------------|---------|
| code          |Response code. (See below for a list of response codes) | Integer |
| message       | Text message with query result  | String  |

## Operation Complete
To complete payment send a POST request to url https://pay.concord.ua/api with the following parameters:

| Parameter | Description                                                                                                                                                     | Type     |
|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| merchant_id   |  merchant identifier                                                                                                                                        | String  |
| operation     | Complete                                                                                                                                                     | String  |
| order_id      | This is the unique transaction number that was sent in the purchase request.                                                                                    | Integer |
| amount        | Charged Amount                                                                                                                                             |  float  |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.     | String  |
|               | The string to be HMAC_MD5 is generated by concatenating the parameters $merchant_id, $order_id, $ amount separated by “;” (semicolon) in UTF-8 encoding. |         |
|               | **The order of parameters during concatenation is important!**                                                                                                                  |         |


JSON is returned in response with the following parameters:

| Parameter | Description                                   | Type     |
|---------------|--------------------------------------------|---------|
| code          | Response code. (See below for a list of response codes) | Integer |
| message       | Text message with query result  | String  |


## Operation Check

To check the payment status send a POST request to url https://pay.concord.ua/api/check with the following parameters:

| Parameter | Description                                                                                                                                                 | Type     |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| merchant_id   |  merchant identifier                                                                                                                                    | String  |
| order_id      | This is a unique transaction number that was sent in a P2PCredit, P2PDebit or Verify request.                                                            | Integer |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant. | String  |
|               | The string to be HMAC_MD5 is generated by concatenating the parameters $merchant_id, $order_id separated by “;” (semicolon) in UTF-8 encoding.      |         |
|               | **The order of parameters during concatenation is important!**                                                                                                                |         |

JSON is returned in response with the following parameters:

| Parameter    | Description                                   | Type        |
|-------------------|--------------------------------------------|------------|
| reasoneCode       | Response code. (See below for a list of response codes) | Integer    |
| reason            | Answer Description                            | String     |
| merchantAccount   | merchant                                   | String     |
| amount            | Amount                                      | String     |
| phone             | Phone number                            | String     |
| createdDate       | payment date                               | String     |
| cardPan           | Masked card number                  | String     |
| cardType          | Card type                                  | String     |
| transactionId     | Transaction ID                  | BigInteger |
| message           | Text message with query result  | String     |
| datetime          | Server creation date          | String     |
| fee               | Payment commission                           | Double     |
| transactionStatus | Operation Status (Reference see below)        | String     |

## Operation P2PCredit

To replenish the card send a POST request with the following parameters:

| Parameter | Description                                                                                                                                                                             | Type    |
|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------|
| operation     | transaction type “P2PCredit”                                                                                                                                                             | String |
| merchant_id   |  merchant identifier                                                                                                                                                                | String |
| order_id      | This is a unique transaction number. It is generated on the side of the merchant. It must be unique throughout the work.                                                                | String |
| amount        | The sum of the operation must be a fractional number, with two decimal places. Example: 100.50                                                                                           | Double |
| card_number   | Recipient card number.                                                                                                                                                              | String |
| token         | Token, can be used instead of the recipient card                                                                                                                                    | String |
| visa_alias	| Instead of a card or token, VisaAlias can be specified <br> If a phone number is used as an alias, it must be provided according to the ITU-T E.164 (2010). <br>Example (phone number): 380670000000| String |
| visa_alias_type | Alias type. Required if visa_alias is specified.	| String |
| currency_iso  | Transaction currency. Currently only “UAH” is available                                                                                                                              | String |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant. <p>The string subject to HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, card_number/token, currency_iso separated by “;” (semicolon) in UTF-8 encoding. <p> If visa_alias specified parameter card_number need to be empty string <p>  **The order of parameters during concatenation is important!**  | String |

Possible values for the visa_alias_type parameter:
   - 01 - phone number,
   - 02 - email address,
   - 03 - national identifier,
   - 04 - IBAN (international bank account number)

Information about additional fields for identifying the sender and recipient of transfer can be found in the corresponding directory.

JSON is returned in response with the following parameters:

| Parameter | Description                                                                              | Type     |
|---------------|---------------------------------------------------------------------------------------|---------|
| code          | Response code. (For a list of response codes, see P2PCredit response codes below)                     | Integer |
| message       | Text message with query result                                             | String  |
| status        | Transaction Statuses                                                                     | String  |
|               | APPROVED - translation successful                                                            |         |
|               | DECLINED - Translation failed                                                         |         |
|               | ON-PAYMENT - An application for transfer is being processed, it is necessary to request an additional status |         |
| transactionID | Transaction ID in the payment system                                          | Integer |
| approvalCode  | Authorization code                                                                      | Integer |

## Get Aliаs Information 
To get alias information you need to send POST request to url  https://pay.concord.ua/alias/getinfo with the following parameters:
| Parameter | Description                                                                                                                                                 | Type    |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|--------|
| merchantId    | merchant identifier     | String |     
| alias	|  VisaAlias. <br> If a phone number is used as an alias, it must be provided according to the ITU-T E.164 (2010). <br>Example (phone number): 380670000000| String |
| aliasType | Alias type 	| String |  
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant. <p>The string subject to HMAC_MD5 is generated by concatenating the parameters merchant_id,alias,aliasType separated by “;” (semicolon) in UTF-8 encoding. <p> **The order of parameters during concatenation is important!**  | String |

Possible values for the visa_alias_type parameter:
   - 01 - phone number,
   - 02 - email address,
   - 03 - national identifier,
   - 04 - IBAN (international bank account number)

JSON is returned in response with the following parameters:

| Parameter  | Description                     | Type   |
|----------------|------------------------------|-------|
| code     | Response code (0 - alias found, 1 - not found) | Integer |
| recipientName   | Recipient name | String |
| recipientPrimaryAccountNumber   | Masked  card number | String |
| issuerName | Bank issuer name | String |

## Get Balance Operation (GetBalance)

To get operation balance send a POST to the url https://pay.concord.ua/api/balance request with the following parameters:

| Parameter | Description                                                                                                                                                 | Type    |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|--------|
| operation     | operation type “GetBalance”                                                                                                                            | String |
| merchant_id   | merchant identifier                                                                                                                                    | String |
| date          | Date and time of request in any format                                                                                                              | String |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant. | String |
|               | The string to be HMAC_MD5 is generated by concatenating the parameters $merchant_id, $data separated by “;” (semicolon) in UTF-8 encoding.         |        |
|               |  **The order of parameters during concatenation is important!**                                                                                                               |        |

JSON is returned in response with the following parameters:

| Parameter  | Description                     | Type   |
|----------------|------------------------------|-------|
| mk_deposit     | Mastercard Limit            | Float |
| visa_deposit   | Visa Limit                  | Float |
| mk_available   | Available Balance Mastercard | Float |
| visa_available | Available Visa Balance       | Float |

## Operation P2PDebit


To debit funds from the card you should redirect the user to the payment gateway page using the POST method with the following parameters:

| Parameter | Description                                                                                                                                                                                                             | Type     |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
| operation     | operation type “P2PDebit”                                                                                                                                                                                             | String  |
| merchant_id   | merchant identifier                                                                                                                                                                                               | String  |
| order_id      | This is a unique transaction number. It is generated on the side of the merchant. It must be unique throughout the work.                                                                                                | Integer |
| amount        | The sum of the operation must be a fractional number, with two decimal places. Example: 100.50                                                                                                                            | Double  |
| currency_iso  | Transaction currency. Currently only “UAH” is available                                                                                                                                                              | String  |
| description   | Purpose of payment                                                                                                                                                                                                  | String  |
| approve_url   | URL to which the user will be redirected in case of a successful operation                                                                                                                                           | String  |
| decline_url   | URL to which the user will be redirected in case of unsuccessful operation                                                                                                                                       | String  |
| cancel_url    | URL to which the user will be redirected if the operation is canceled                                                                                                                                            | String  |
| signature     | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                                                           | String  |
|               | The string subject to HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, currency_iso, description, approve_url, decline_url, cancel_url separated by “;” (semicolon) in UTF-8 encoding. |         |
|               | **The order of parameters during concatenation is important!**                                                                                                                                                                                |         |

Information about additional fields for identifying the sender and recipient of transfer can be found in the corresponding directory.

## Operation PurchaseOnMerchant

To pay on the merchant’s payment page you should send a POST request with the following data.


**Production url:**   https://pay.concord.ua/api/

POST parameters:

|  Parameter     | Description                                                                                                                                           |           Value         |
|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| operation      | Type of transaction                                                                                                                                                                      | PurchaseOnMerchant |
| merchant_id    |  merchant identifier                                                                                                                                                  |                    |
| amount         | The amount of the transaction. Example 500.00                                                                                                                                                     |                    |
| signature      | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                          |                    |
|                | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, currency_iso, description separated by “;” (semicolon) in UTF-8 encoding. |                    |
|                | The order of parameters during concatenation is important!                                                                                                                                        |                    |
| order_id       | Unique transaction number on the merchant side. If the operation is duplicated, the merchant receives an error.                                                                              |                    |
| currency_iso   | Currency of payment.                                                                                                                                                                   | UAH                |
| description    | Purpose of payment. It is displayed on the payment page when entering payment details. Displayed in the account statement and registries                                                  |                    |
| add_params     | An array with additional parameters. Additional parameters are then returned to the merchant in a callback call                                                                     |                    |
| token          | Token for debiting from a card without transferring card details                                                                                                                          |                    |
| card_num       | Card number                                                                                                                                                                       |                    |
| card_exp_month | Validity of MM card                                                                                                                                                            |                    |
| card_exp_year  | YY card expiration date                                                                                                                                                           |                    |
| card_cvv       | CVV2 code, in case of operation without CVV specify -1                                                                                                                         |                    |
| card_holder    | Cardowner. Optional field                                                                                                                                             |                    |
| phone          | Customer Phone Number Optional field                                                                                                                                      |                    |
| payment_type   | Type of payment.                                                                                                                                                                      |                    |
|                | Purchase - purchase                                                                                                                                                                |                    |
|                | PreAuth - blocking funds on the card                                                                                                                                           |                    |
| secure_type    | Transaction Security Pass Type                                                                                                                                           |                    |
|                | It can take the following values:                                                                                                                                              |                    |
|                | Auto                                                                                                                                                                              |                    |
|                | 3DS                                                                                                                                                                               |                    |
|                | Non3DS                                                                                                                                                                            |                    |
| callback_url   | URL to which information about the result of the payment will come      |                    |


Answer:

|       Описание          |         Description                                                  |          Value                    |
|-----------------|------------------------------------------------------------------------------|------------------------------|
| status          | Payment status                                                               | reference “Payment statuses” |
| code            | Response code                                                                   | Reference “Response Codes”    |
| order_id        | Unique order number in the merchant system                                   |                              |
| amount          | Amount of payment                                                                |                              |
| fee             | Commission                                                                     |                              |
| currency        | Payment currency                                                               |                              |
| token           | Token for subsequent payments. Token will be returned if payment is successful    |                              |
| d3_acs_url      | Acs URL of the server to which the user must be sent for verification |                              |
| d3_md           | The unique identifier that must be transmitted to the ACS server           |                              |
| d3_pareq        | Request to transfer to ACS server                             |                              |
| transaction_key | Transaction key that must be used to confirm payment   |                              |
| transaction_id  | Transaction ID                                                     |                              |
| signature       |                                                                              |                              |

If the response code returns 2001, a 3DS check is required.

To verify 3ds, you should use the POST method to send a form with the parameters d3_md, d3_pareq, term_url to d3_acs_url.



term_url - url to which the 3DS check result will return.

``` html
<form name="MPIform" action='${d3_acs_url}' method="POST">
<input type="hidden" name="PaReq" value='${d3_pareq }'>
<input type="hidden" name="MD" value='${d3_md }'>
<input type="hidden" name="TermUrl" value='${term_url}'>
</form>
```

## Getting a token for Masterpass
**Production url:**  https://pay.concord.ua/api/mptoken

To receive a guest token send a POST request with the following data.

| Parameter  | Description                                                             |
|-----------|----------------------------------------------------------------------|
| msisdn    | Masterpass wallet phone number in format 380XXXXXXXXX |
| client_id | Customer ID in MasterPass                         |


The response comes in an object in JSON format with the following parameters:

| Parameter     | Description                            |
|--------------|-------------------------------------|
| res          | Query result 0 - everything is ok       |
| msg          | Error message                 |
| token        | Token for transferring to the mfs library |
| reference_no | Unique Request Number            |

## Making a payment through Masterpass
**Production url:**  https://pay.concord.ua/api

To receive a guest token send a POST request with the following data.

| Parameter               | Description                                                                                                                                                                          | Value           |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| operation              | Type of transaction                                                                                                                                                                    | PurchaseMasterpass |
| merchant_id            | merchant identifier                                                                                                                                                             |                    |
| amount                 | Amount of payment in the format 1.00                                                                                                                                                      |                    |
| order_id               |                                                                                                                                                                                   |                    |
| currency_iso           | Currency                                                                                                                                                                            | UAH                |
| description            | Payment Description                                                                                                                                                                 |                    |
| approve_url            | Redirect URL after successful payment (in case of 3DS confirmation on the ConcordPay page)                                                                                 |                    |
| decline_url            | Redirect URL after a failed payment (in case of 3DS confirmation on the ConcordPay page)                                                                              |                    |
| cancel_url             | Redirect URL after cancellation of payment (in case of 3DS confirmation on the ConcordPay page)                                                                                    |                    |
| callback_url           | URL to which callback about payment status will be sent                                                                                                                        |                    |
| add_params[wallet]     | Wallet sign                                                                                                                                                                  | masterpass         |
| add_params[msisdn]     | Masterpass wallet phone number in 380XXXXXXXXX format                                                                                                             |                    |
| add_params[token]      | Token received from MasterPass server                                                                                                                                            |                    |
| add_params[card_name]  | Alias ​​cards received from MasterPass server                                                                                                                                       |                    |
| add_params[client_id]  | Merchant ID in MasterPass                                                                                                                                       |                    |
| add_params[ret_ref_no] | Unique transaction number received from MasterPass server                                                                                                                       |                    |
| signature              | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                          |                    |
|                        | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, currency_iso, description separated by “;” (semicolon) in UTF-8 encoding. |                    |
|                        |  **The order of parameters during concatenation is important!**                                                                                                                                          |                    |


The response comes in an object in JSON format with the following parameters:

If a transaction requires 3DS confirmation:

| Parameter        | Description                                                                                                                                                                                                                                      |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| code            | Response code                                                                                                                                                                                                                                    |
| status          | Transaction status, if 3DS verification is required, the status will be 3ds                                                                                                                                                              |
| d3AcsUrl        | url to redirect client to check 3ds                                                                                                                                                                                             |
| d3Md            | Cryptogram for transferring to a 3DS host                                                                                                                                                                                                         |
| d3Pareq         | Request to transfer to 3DS host                                                                                                                                                                                                               |
| transaction_key | 3DS transaction key                                                                                                                                                                                                         |
| TermUrl         | Url to redirect after entering the verification code on the 3DS page. By default, the url to the ConcordPay page, you can specify your URL to check 3DS, then after passing 3DS you need to call the “Confirm 3DS Verification” method |

## The confirmation of 3DS Verification Verification
To pay on the merchant’s payment page, you must send a POST request with the following data.


**Production url:**   https://pay.concord.ua/api/

| Parameter        | Description                                                                                                                                                                    | Value    |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| operation       | Type of transaction                                                                                                                                                                | Complete3DS |
| transaction_key | Transaction key                                                                                                                                                            |             |
| merchant_id     | merchant identifier                                                                                                                                                       |             |
| d3ds_md         | ID received after redirect from ACS server                                                                                                                      |             |
| d3ds_pares      | Message received after redirect from ACS server                                                                                                                          |             |
| signature       | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                    |             |
|                 | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, transaction_key, d3ds_md, d3ds_pares separated by “;” (semicolon) in UTF-8 encoding. |             |
|                 |  **The order of parameters during concatenation is important!**                                                                                                                                     |             |

Answer:

| Parameter       | Description                                   | Value                     |
|----------------|--------------------------------------------|------------------------------|
| status         | Payment status                             | reference “Payment statuses”|
| code           | Response code                                 | Reference “Response Codes”   |
| order_id       | Unique order number in the merchant system |                              |
| amount         | Amount of payment                              |                              |
| fee            | Commission                                   |                              |
| currency       | Payment currency                             |                              |
| card_pan       | Masked card number                  |                              |
| transaction_id | Transaction ID                   |                              |

## Payment on the payment splitting processing page


To pay on the payment processing page redirect to the page of the processing center, with POST data.

**Production url:**   https://pay.concord.ua/api/

POST parameters:

|          Parameter         |                                     Description          |       Value            |
|--------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
| operation    | Type of transaction                                                                                                                                                                                                      | Purchase          |
| merchant_id  | merchant identifier                                                                                                                                                                                 |                   |
| amount       | The amount of the transaction. Example 500.00                                                                                                                                                                                    |                   |
| signature    | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                                                          |                   |
|              | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, order_id, amount, currency_iso, description separated by “;” (semicolon) in UTF-8 encoding.                                 |                   |
|              | The order of parameters during concatenation is important!                                                                                                                                                                        |                   |
| order_id     | Unique transaction number on the merchant side. If the operation is duplicated, the merchant receives an error.                                                                                                              |                   |
| currency_iso | Currency of payment.                                                                                                                                                                                                   | UAH               |
| description  | Purpose of payment. It is displayed on the payment page when entering payment details. Displayed in the account statement and registries                                                                                  |                   |
| add_params   | An array with additional parameters. Additional parameters are then returned to the merchant in a callback call                                                                                                      |                   |
| split        | Sign of payment splitting                                                                                                                                                                                       | 0 - не расщеплять |
|              |                                                                                                                                                                                                                   | 1 -  расщеплять   |
| split_rules  | An array with splitting rules that contains the identifiers of the submerchant and amount.                                                                                                                        |                   |
|              | The amount of splits must match the amount of payment.                                                                                                                                                              |                   |
|              | Example:                                                                                                                                                                                                           |                   |
|              | split_rules[0][sub_merchant_id]=test1&split_rules[0][amount]=100.00&split_rules[1][sub_merchant_id]=test2&split_rules[1][amount]=50.00&.......&split_rules[n][sub_merchant_id]=testn&split_rules[n][amount]=10.00 |                   |
| approve_url  | Redirect URL in case payment is successful                                                                                                                                                              |                   |
| decline_url  | Redirect URL in case payment is unsuccessful                                                                                                                                                          |                   |
| cancel_url   | Redirect URL in case the user refuses to make a payment                                                                                                                                      |                   |
| callback_url | URL to which information about the result of the payment will come                                                                                                                                                 |                   |


## Card range information
To get card range information send POST data to url https://pay.concord.ua/api/bas

| Parameter        | Description | Value    |
|-----------------|----------|-------------|
| merchant_id | merchant identifier | String |
| range | First 9 digits of card number |  String | 
| signature    | In order to confirm the validity of the data, a verification signature must be generated and transmitted in the HMAC_MD5 request using the SecretKey merchant.                                                          |                   |
|              | The string to be HMAC_MD5 is generated by concatenating the parameters merchant_id, range separated by “;” (semicolon) in UTF-8 encoding.                                 |                   |
|              | The order of parameters during concatenation is important!                                                                                                                                                                        |                   |


The response comes in an object in JSON format with the following parameters (set of parameters depends on service level):
 
| Field Name | Attribute Description | Type | Level 1 (Base) | Level 2 (Full) |
|------------|----------|--------|--------|--------|
| code | Error code. If 0 - success |  Integer |  X |  X | 
| message | Error message in case where code > 0 | String | X | X |
| minRange | Account Range Minimum | Integer | X | X |
| maxRange | Account Range Maximum | Integer | X | X | 
| brandCd | Brand Indicator | String | X | X | 
| issuerBin | Issuer BIN | String | X | X | 
| binLength | BIN Length | String | X | X | 
| sharedBinInd | Shared BIN Indicator | String | X | X | 
| posdomesticOnlyInd | Domestic-Use-Only Flag | String | X | X | 
| onlineGamblBlockInd | Online Gambling Block | String | X | X | 
| binRangePaymentAccountType | Token Indicator | String | X | X | 
| issuerBillingCurrCd | Issuer Billing Currency | String | | X | 
| accountCtryAlpha2Code | Issuer Country Code | String | | X | 
| platformCd | Product Platform | String | | X | 
| productId | Product ID | String | | X | 
| productIdName | Product Name | String | | X | 
| accountFundingSourceCd | Account Funding Source | String | | X | 
| accountFundingSourceSubtypeCd | Account Funding Source Subtype | String | | X | 
| accountBusName | Issuer Name | String | | X | 
                      
Error codes
| Error code | Description | 
|-----------------|----------|
| 0 |  Success | 
| 1 | Merchant not found | 
| 2 | Wrong signature | 
| 3 |  Wrong field format | 
| 5 | Data not found | 